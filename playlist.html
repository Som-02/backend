<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Mood Playlist</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      margin: 0;
      padding: 60px 20px;
      color: white;
      background-color: #101f30;
      background-image: url('image.jpg');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      background-blend-mode: soft-light;
      overflow-x: hidden;
    }

    .playlist-container {
      max-width: 900px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(8px);
      border-radius: 20px;
      padding: 30px;
      box-shadow: 0 0 40px rgba(0,255,191,0.15);
    }

    .playlist-header {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
      gap: 20px;
    }

    .playlist-header img {
      width: 160px;
      height: 160px;
      border-radius: 15px;
      object-fit: cover;
      box-shadow: 0 0 25px rgb(0, 255, 191);
    }

    .playlist-header h1 {
      font-size: 36px;
      font-weight: 600;
      margin-bottom: 5px;
    }

    .playlist-header p {
      font-size: 16px;
      color: #e0e0e0;
    }

    .song-list {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    .song-list th, .song-list td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    .song-list th {
      color: #ffffff;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .song-list td {
      color: rgb(0, 255, 166);
      font-size: 16px;
      text-shadow: 0 0 10px rgba(0,255,166,0.3);
    }

    .song-title {
      font-weight: 600;
    }

    .play-button {
      background-color: #1db954;
      border: none;
      border-radius: 50%;
      width: 35px;
      height: 35px;
      color: #fff;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 0 10px rgba(29,185,84,0.4);
      transition: 0.3s;
    }

    .play-button:hover {
      background-color: #1ed760;
      transform: scale(1.1);
      box-shadow: 0 0 15px rgba(29,185,84,0.6);
    }

    .back-btn {
      background: linear-gradient(135deg, #1db954, #00ffc8);
      border: none;
      color: white;
      padding: 10px 18px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      margin-bottom: 20px;
      transition: 0.3s ease;
      box-shadow: 0 0 15px rgba(0,255,191,0.3);
    }

    .back-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0,255,191,0.5);
    }

  </style>
</head>
<body>
  <div class="playlist-container">
    <button class="back-btn" onclick="window.location.href='demo2.html'">‚¨Ö Back</button>

    <div class="playlist-header">
      <div>
        <h1>Your Mood Playlist</h1>
        <p>Auto-generated based on your mood or activity</p>
      </div>
    </div>

    <div id="generatedPlaylist"></div>
  </div>

  <script>
  const playlistData = JSON.parse(localStorage.getItem('generatedPlaylist')) || [];
  const selectedMood = localStorage.getItem('selectedMood') || ''; // üëà retrieve stored mood

  function renderPlaylist(list){
    const container = document.getElementById('generatedPlaylist');
    const title = document.querySelector('.playlist-header h1');

    // Update heading dynamically
    if(selectedMood){
      title.textContent = `Your "${selectedMood}" playlist`;
    }

    if(!list.length){
      container.innerHTML = "<p style='text-align:center;color:white;'>No playlist found! Please generate one first.</p>";
      return;
    }

    container.innerHTML = `
      <table class="song-list">
        <thead><tr><th>#</th><th>Title</th><th>Play</th></tr></thead>
        <tbody>
          ${list.map((s,i)=>`
            <tr>
              <td>${i+1}</td>
              <td class="song-title">${s.title} ‚Äî ${s.artist}</td>
              <td>
                <button class="play-button" id="playBtn${i}" onclick="togglePlay('song${i}', 'playBtn${i}')">‚ñ∂</button>
                <audio id="song${i}" src="${s.url}"></audio>
              </td>
            </tr>`).join('')}
        </tbody>
      </table>
    `;
  }

  let currentSong = null;

  function togglePlay(songId, btnId){
    const song = document.getElementById(songId);
    const btn = document.getElementById(btnId);
    if(currentSong && currentSong !== song){
      currentSong.pause();
      const prevBtn = document.querySelector(`.play-button[onclick*="${currentSong.id}"]`);
      if(prevBtn) prevBtn.innerHTML = "‚ñ∂";
    }
    if(song.paused){
      song.play();
      btn.innerHTML = "‚ùö‚ùö";
      currentSong = song;
    } else {
      song.pause();
      btn.innerHTML = "‚ñ∂";
      currentSong = null;
    }
  }

  renderPlaylist(playlistData);
</script>

</body>
</html>
